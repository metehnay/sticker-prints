import React, { useEffect, useState } from "react";
import { View, Text, Image } from "react-native";
import { styles } from "./style";
import Svg, { G, Path } from "react-native-svg";

interface RouteParams {
  item: {
    title: string;
    malzemeler: string;
    tarif: string;
  };
}

const Tarif = ({ route }: any) => {
  const [loading, setLoading] = useState(true);

  const { item } = route.params;
  if (!item) {
    return <Text>No recipe data available.</Text>;
  }
  const ingredientsArray = item.malzemeler.split(/\s(?=\d+)/);
  const tarif = item.tarif.split("."); // Splitting by dot

  const tarifSteps = [];
  for (let i = 0; i < tarif.length; i += 4) {
    tarifSteps.push(tarif.slice(i, i + 4).join("."));
  }

  return (
    <View>
      <Image
        source={{ uri: item.imageUrl }}
        style={styles.imageCs}
        resizeMode="cover"
      />
      <View style={styles.box}>
        <View style={styles.bg}>
          <Svg width="35px" height="35px" viewBox="0 0 24 24" fill="none">
            <Path
              d="M11 6h10m-10 6h10m-10 6h10M3 11.945L4.538 13.5 8 10M3 5.944L4.538 7.5 8 4M4.5 18h.01M5 18a.5.5 0 11-1 0 .5.5 0 011 0z"
              stroke="#fff"
              strokeWidth={2}
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </Svg>
          <Text style={styles.malzemetitle}>MALZEMELER</Text>
        </View>
        <View style={styles.icon}>
          <Svg
            fill="#000"
            width="64px"
            height="64px"
            viewBox="0 -0.5 122.88 122.88"
          >
            <Path d="M97.34.74c.86-.93 2.3-.99 3.23-.13.93.86.99 2.3.13 3.23L81.98 24.1l-.03.04c-2.29 2.77-3.86 5.33-4.56 7.67-.62 2.07-.53 3.95.39 5.59.49.88.33 1.96-.32 2.67l-8.89 9.62c-.87-.95-1.56-1.72-2.02-2.22-.21-.28-.45-.55-.7-.81l-.02.02c-.12-.13-.25-.25-.38-.37l7.6-8.23c-.89-2.38-.88-4.91-.06-7.6.88-2.92 2.75-6.03 5.44-9.27.06-.08.11-.16.18-.23L97.32.72l.02.02zM57.13 55.01c-.84-.94-.76-2.39.18-3.23.94-.84 2.39-.76 3.23.18 9.41 10.54 38.5 41.73 46.56 53.39 10.63 15.05-5.83 19.79-11.29 14.31-13.64-13.19-42.6-46.82-55.33-61.08-4.58 1.94-9.03 2.24-13.5.96-4.81-1.37-9.52-4.58-14.3-9.51l-.06-.06c-3.64-3.84-6.49-7.63-8.55-11.38C1.96 34.73.67 30.91.21 27.12c-.49-4.08-.11-7.88.99-11.25 1.29-3.96 3.58-7.31 6.58-9.8 3.02-2.5 6.73-4.12 10.87-4.62 3.44-.41 7.19-.06 11.07 1.21 5.37 1.75 11.63 6.1 16.82 11.68 3.83 4.11 7.11 8.92 9.06 13.87 2.03 5.16 2.65 10.5 1.02 15.5-.96 2.96-2.7 5.74-5.4 8.25-.93.86-2.37.8-3.23-.12-.86-.93-.8-2.37.12-3.23 2.09-1.95 3.43-4.08 4.16-6.33 1.26-3.87.73-8.16-.93-12.38-1.74-4.42-4.69-8.74-8.15-12.45-4.68-5.02-10.23-8.91-14.91-10.44-3.21-1.04-6.28-1.34-9.09-1-3.26.4-6.18 1.65-8.51 3.6-2.34 1.95-4.13 4.58-5.16 7.71-.89 2.73-1.2 5.87-.79 9.26.39 3.2 1.5 6.47 3.32 9.81 1.91 3.43 4.53 6.9 7.9 10.45l.02.03c4.22 4.35 8.27 7.15 12.28 8.29 3.79 1.08 7.65.66 11.68-1.35.92-.53 2.11-.35 2.84.47 12.42 13.91 42.63 48.92 56.01 61.89 5.81 2.37 9.03-.55 6.25-5.7-4.33-8.04-41.53-48.3-47.9-55.46zM45.07 75.12l-29.16 31.55c-.06.06-.11.12-.18.18-4.26 4.6 3.28 11.3 7.96 6.82l28.32-30.65 3.04 3.45-28.1 30.41c-.06.07-.12.13-.2.2-1.68 1.41-3.37 2.33-5.08 2.71-1.76.4-3.49.22-5.15-.56-.28-.11-.54-.25-.77-.46l-4.03-3.73c-.06-.06-.12-.11-.18-.18-1.56-1.8-2.3-3.72-2.1-5.75.19-1.92 1.21-3.79 3.14-5.59l29.44-31.86 3.05 3.46zm30.56-17.66l1.73-1.87c.86-.93 2.31-.99 3.23-.13s.99 2.3.13 3.23l-2 2.16-3.09-3.39zm28.82-50.03c.86-.93 2.3-.99 3.23-.13.93.86.99 2.3.13 3.23L91.4 28.3c-.86.93-2.3.99-3.23.13a2.28 2.28 0 01-.13-3.23l16.41-17.77zm7.1 6.57c.86-.93 2.3-.99 3.23-.13.93.86.99 2.3.13 3.23l-16.4 17.76c-.86.93-2.3.99-3.23.13a2.28 2.28 0 01-.13-3.23L111.55 14zm7.36 6.83c.86-.93 2.3-.99 3.23-.13.93.86.99 2.31.13 3.23L103.55 44.2c-.07.07-.14.13-.21.2-4.26 4.1-8.33 6.47-12.22 7.14-4.22.73-8.09-.47-11.64-3.57a2.29 2.29 0 01-.22-3.22 2.29 2.29 0 013.22-.22c2.45 2.14 5.07 2.98 7.84 2.49 2.98-.51 6.26-2.48 9.84-5.93l.02-.02 18.71-20.25.02.01z" />
          </Svg>
        </View>
        {ingredientsArray.map((ingredient: string, index: number) => (
          <Text key={index}>{ingredient}</Text>
        ))}
      </View>
      <View style={styles.box}>
        <View style={styles.bg}>
          <Svg
            fill="#fff"
            width="35px"
            height="35px"
            viewBox="0 -37.5 122.88 122.88"
            id="Layer_1"
          >
            <Path
              d="M4.98 27.65H29.7c2.16 0 4.01 1.39 4.7 3.33h20.28l-.76-4.02A1.65 1.65 0 0155.54 25h65.68a1.662 1.662 0 011.57 2.2l-2.69 10.18c-.77 2.93-2.07 5.69-4.02 7.63-1.76 1.76-4.02 2.86-6.84 2.86h-42.5c-2.88 0-5.26-1.13-7.09-2.96-1.95-1.95-3.24-4.69-3.79-7.65l-.56-2.96H34.4c-.69 1.93-2.54 3.33-4.7 3.33H4.98C2.25 37.62 0 35.38 0 32.64s2.24-4.99 4.98-4.99zM104.49.48c.65-.65 1.7-.65 2.34 0s.65 1.7 0 2.34c-1.58 1.58-.86 2.93-.02 4.5 1.41 2.64 3.04 5.67.28 10.44-.46.79-1.47 1.06-2.26.6a1.652 1.652 0 01-.6-2.26c1.83-3.18.68-5.34-.33-7.23-1.46-2.72-2.72-5.07.59-8.39zm-12.32 0c.65-.65 1.7-.65 2.34 0s.65 1.7 0 2.34c-1.58 1.58-.86 2.93-.02 4.5 1.41 2.64 3.04 5.67.28 10.44-.46.79-1.47 1.06-2.26.6a1.652 1.652 0 01-.6-2.26c1.83-3.18.68-5.34-.33-7.23-1.46-2.72-2.72-5.07.59-8.39zm-12.31 0c.65-.65 1.7-.65 2.34 0 .65.65.65 1.7 0 2.34-1.58 1.58-.86 2.93-.02 4.5 1.41 2.64 3.04 5.67.28 10.44-.46.79-1.47 1.06-2.26.6a1.652 1.652 0 01-.6-2.26c1.83-3.18.68-5.34-.33-7.23-1.47-2.72-2.73-5.07.59-8.39zm-12.32 0c.65-.65 1.7-.65 2.34 0 .65.65.65 1.7 0 2.34-1.58 1.58-.86 2.93-.02 4.5 1.41 2.64 3.04 5.67.28 10.44-.46.79-1.47 1.06-2.26.6s-1.06-1.47-.6-2.26c1.83-3.18.68-5.34-.33-7.23-1.46-2.72-2.72-5.07.59-8.39zm49.37 36.05l2.17-8.22H57.54l1.57 8.34c.44 2.32 1.42 4.45 2.89 5.92 1.23 1.23 2.83 1.99 4.75 1.99h42.5c1.85 0 3.33-.73 4.5-1.89 1.5-1.51 2.53-3.73 3.16-6.14z"
              fillRule="evenodd"
              clipRule="evenodd"
            />
          </Svg>
          <Text style={styles.malzemetitle}>HAZIRLANIÅžI</Text>
        </View>
        {/* Map over the tarif steps */}
        {tarifSteps.map((step: string, index: number) => (
          <Text key={index}>
            {step}
            {"\n"} {/* Adding two newline characters for extra line breaks */}
          </Text>
        ))}
      </View>
    </View>
  );
};

export default Tarif;
